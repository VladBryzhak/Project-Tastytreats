{"version":3,"file":"commonHelpers.js","sources":["../src/js/Api/api-fetch-recipe-by-id.js","../src/js/favorite.js"],"sourcesContent":["import axios from \"axios\";\nconst BASE_URL = `https://tasty-treats-backend.p.goit.global/api`\n\nexport async function getRecipeById(id) {\n    const END_POINT = `/recipes`;\n    try {        \n        const response = await axios(`${BASE_URL}${END_POINT}/${id}`)\n        return response.data;\n    } catch (error) {\n        throw new Error(Notiflix.Notify.failure(`Failed to fetch categories`));\n    }\n};","import { save, load } from \"./storage-service\";\nimport { getRecipeById } from \"./Api/api-fetch-recipe-by-id\";\nimport { renderCard } from \"./render\";\nimport { zip } from \"lodash\";\n\nconst refs = {\n  favRecipesGallery: document.querySelector(\".fav-recipes-list\"),\n  emptyPageSection: document.querySelector(\".empty-section-wrapper\"),\n  favContainer: document.querySelector(\".fav-container\"),\n  buttonList: document.querySelector(\".fav-categories-list\"),\n}\nconst storageArr = load(\"favRecipes\")\nconst storageKey = \"favRecipes\"\nlet currentActiveBtn = \"\";\n\n\nrefs.buttonList.addEventListener(\"click\", categoryBtnClickHandler)\n\nfunction categoryBtnClickHandler (e) {\n  const btnEl = e.target.closest(\".fav-category\")\n\n  if (btnEl && btnEl.dataset.category) {\n    const btnCategory = btnEl.dataset.category\n    const newArr = storageArr.filter(({category}) => category === btnCategory )\n    renderFavCards(newArr)\n\n  } else if (btnEl && btnEl.dataset.value === 'all') {\n    const newStorageArr = load(\"favRecipes\")\n    renderFavCards(newStorageArr)\n  }\n\n  currentActiveBtn.classList.remove(\"active\")\n  btnEl.classList.add(\"active\")\n  currentActiveBtn = btnEl;\n}\nrenderPage()\nfunction renderPage () {\n  const btn = document.querySelector(\"[data-value=all]\");\n  btn.classList.add(\"active\");\n  currentActiveBtn = btn;\n  \n  renderFavCards(storageArr);\n  renderFavCategories(storageArr);\n}\n\n\n\nrefs.favRecipesGallery.addEventListener('click', heartBtnClickHandler)\n\nfunction heartBtnClickHandler (e) {\n  if (e.target.closest(\".heart\")) {\n    let currentCard = e.target.closest(\".card-item\")\n    const currentId = currentCard.dataset.id\n    const currentCategory = currentCard.dataset.category\n    const storage = load(\"favRecipes\")\n\n  // NOT ACTIVE BTN \n    if (!currentCard.classList.contains(\"active\")) {\n      currentCard.classList.add(\"active\");\n      const obj = createRecipeObject(currentId, currentCategory)\n\n      if (!storage) {\n        const newArr = [];\n        newArr.push(obj)\n        save(storageKey, newArr) \n      } else {\n        storage.push(obj)\n        const newArr = storage;\n        save(storageKey, newArr) \n      }\n\n      return\n    }\n\n\n    //  ACTIVE BTN \n    if (currentCard.classList.contains(\"active\")) {\n      currentCard.classList.remove(\"active\")\n\n      const newArr = storage.filter(({id}) => currentId!==id )\n      save(storageKey, newArr) \n      return\n    }\n    \n\n  }\n}\n\nfunction createRecipeObject (id, category){\n  return {\n    id,\n    category\n  }\n}\n\n\n\nfunction renderFavCategories(arr) {\n  //CHECKS IF STORAGE ARR IS EMPTY\n  if (arr.length > 0) {\n    refs.buttonList.classList.remove(\"hide\")\n    // RENDERS CATEGORIES BTN LIST\n    const categoriesArr = arr.map(({category}) => category).filter((el, i, arr) => arr.indexOf(el) === i).sort((a,b) => a.localeCompare(b))\n    categoriesArr.map(el => {\n      refs.buttonList.insertAdjacentHTML(\"beforeend\",\n      `<li class=\"fav-category\" data-category=${el}>\n              <button class=\"fav-category-btn\" type=\"button\">${el}</button>\n        </li>` \n    )\n    })\n    \n  }\n}\n\n\nfunction renderFavCards(arr) {\n  //CHECKS IF STORAGE ARR IS EMPTY\n  if (arr.length > 0) {\n    refs.emptyPageSection.classList.add(\"hide\")\n    refs.favRecipesGallery.classList.remove(\"hide\")\n    refs.favRecipesGallery.innerHTML = \"\";\n    \n    arr.map(({id}) => {\n      getRecipeById(id).then((response) => {\n        const markupArr = [response]\n      \n        refs.favRecipesGallery.insertAdjacentHTML(\"beforeend\", renderCard(markupArr))\n    })\n  })\n  }\n}\n\n"],"names":["BASE_URL","getRecipeById","id","END_POINT","axios","refs","storageArr","load","storageKey","currentActiveBtn","categoryBtnClickHandler","e","btnEl","btnCategory","newArr","category","renderFavCards","newStorageArr","renderPage","btn","renderFavCategories","heartBtnClickHandler","currentCard","currentId","currentCategory","storage","obj","createRecipeObject","save","arr","el","i","a","b","response","markupArr","renderCard"],"mappings":"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"}